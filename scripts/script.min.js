let _0x3acec8=_0x45a8,projectData=((()=>{for(var e=_0x45a8,t=_0x5974();;)try{if(968302==-parseInt(e(441))+parseInt(e(445))/2+-parseInt(e(476))/3*(-parseInt(e(526))/4)+-parseInt(e(522))/5+parseInt(e(430))/6+parseInt(e(418))/7+-parseInt(e(490))/8)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),JSON[_0x3acec8(497)](localStorage[_0x3acec8(475)]("projectData"))||[]),rowHeight=50,sprintWidth=120,colors=["#1a73e8","#34a853","#6B8E23",_0x3acec8(481),_0x3acec8(499),_0x3acec8(503)],highlightRow=parseInt(localStorage.getItem(_0x3acec8(426)))||1;function _0x5974(){let e=["2776907lnmfRV","download","data:text/json;charset=utf-8,","click","add","files","resourceCount","value","highlightRow","resource-row","fa-lock","round","3551148fQuZdU","result","page-title",'</div>\n        <div class="resize-handle"></div>\n        <div class="resize-handle-vertical"></div>\n        <div class="epic-label"><i class="fas fa-clock"></i> ',"max","map","width","name","className","forEach","some","1098467VsDRvf","stringify","epic","contains","3087010fvpwVQ","getElementById","#B0B0B0","Edit Epic Name:","removeItem","My Project","sprint-border",".toolbar-item","pageTitle","filter","keydown","preventDefault","position",'\n        <div style="cursor: text; font-weight: bold;" onclick="startEditingEpicName(','</div>\n        <div class="delete-epic" onclick="deleteEpic(','<i class="fas fa-lock-open"></i> Effort',')"><i class="fas fa-trash-alt"></i></div>\n    ',"href","remove","removeChild","Enter","innerHTML","style","floor","clientX","type","onmousemove","highlightRowInput","onload","classList","getItem","6ggqGdG","isLockAreaEnabled","pointerEvents","addEventListener","key","#009688","setData","locked","arrangeButton","left","none","color","opacity","body","13127384IdenyO","setAttribute","0.5","backgroundColor","innerText","input","top","parse","dragover","#9c27b0","now","mousedown","dataTransfer","#4682B4","lock-effort-toggle","fa-lock-open","trim","drop","div","getBoundingClientRect","length",'<div class="timeline-grid"></div>',"getData","stopPropagation","projectData","createElement","fill","Cannot place Epic here - overlaps with existing Epic.","resize-handle","height","onmouseup","appendChild","2344720UFeuna","New Epic","setItem","clientY","3289144OMVPTq","target","find","querySelector"];return(_0x5974=function(){return e})()}function saveAndRender(){var e=_0x3acec8;localStorage[e(524)](e(514),JSON[e(442)](projectData)),render()}function clearTimeline(){var e=_0x3acec8,t=(projectData=[],localStorage[e(449)](e(453)),saveAndRender(),isLockAreaEnabled=!1,localStorage[e(524)](e(477),JSON[e(442)](isLockAreaEnabled)),updateLockAreaToggle(),document[e(446)](e(432)));t[e(494)]=e(450),t[e(467)].color=e(447)}function snapToGrid(e){var t=_0x3acec8;return Math[t(429)](e/sprintWidth)*sprintWidth}function snapToRow(e){return Math.round(e/rowHeight)*rowHeight}function render(){let t=_0x3acec8;timeline.innerHTML=t(511),drawResourceRows(),projectData[t(439)](e=>timeline[t(521)](createEpicElement(e))),drawSprintGrid()}function drawResourceRows(){var t=_0x3acec8,a=26*sprintWidth;for(let e=0;e<50;e++){var c=document[t(515)](t(508));c.className=t(427),c[t(467)][t(496)]=e*rowHeight+"px",c[t(467)][t(436)]=a+"px",timeline[t(521)](c)}var e=document[t(515)]("div");e.className="resource-line",e[t(467)][t(496)]=highlightRow*rowHeight-2+"px",timeline[t(521)](e)}function createEpicElement(e){var t=_0x3acec8,a=document[t(515)](t(508));return a[t(438)]=t(443),a[t(467)].backgroundColor=e[t(487)],a[t(467)].top=e[t(496)]+"px",a[t(467)][t(485)]=e[t(485)]+"px",a[t(467)][t(436)]=e[t(436)]*sprintWidth+"px",a[t(467)][t(519)]=e.resourceCount*rowHeight+"px",a[t(466)]=t(458)+e.id+')">'+e.name+t(433)+e[t(436)]+'</div>\n        <div class="epic-resource-label"><i class="fas fa-users"></i> '+e[t(424)]+t(459)+e.id+t(461),makeDraggable(a,e),a}function deleteEpic(t){var e=_0x3acec8;projectData=projectData[e(454)](e=>e.id!==t),saveAndRender()}function startEditingEpicName(t){var e=_0x3acec8,a=projectData[e(528)](e=>e.id===t),c=prompt(e(448),a[e(437)]);null!==c&&(a[e(437)]=c.trim()||e(523),saveAndRender())}function makeDraggable(e,a){let c=_0x3acec8;e[c(479)](c(501),e=>{var t=c;(e[t(527)].classList[t(444)](t(518))?startResizing:e[t(527)][t(474)][t(444)]("resize-handle-vertical")?startVerticalResizing:startDragging)(e,a)})}function startDragging(e,r){let i=_0x3acec8,n=(e[i(456)](),e[i(469)]-e.target[i(509)]().left),o=e[i(525)]-e[i(527)][i(509)]().top;document[i(471)]=e=>{var t=i;let a=snapToGrid(e.clientX-n-timeline[t(509)]()[t(485)]),c=snapToRow(e[t(525)]-o-timeline[t(509)]()[t(496)]);a<0&&(a=0),c<0&&(c=0),checkOverlap(r,a,c,r[t(436)]*sprintWidth,r[t(424)]*rowHeight)||(r[t(485)]=a,r.top=c,saveAndRender())},document.onmouseup=()=>document[i(471)]=null}function startResizing(e,c){let r=_0x3acec8,i=e.clientX,n=c[r(436)]*sprintWidth,o=c[r(424)]*rowHeight;document[r(471)]=e=>{var t,a=r,e=snapToGrid(Math[a(434)](sprintWidth,n+(e.clientX-i))),e=Math.round(e/sprintWidth);isLockAreaEnabled?(t=o/rowHeight*(n/sprintWidth),t=Math.round(t/e),checkOverlap(c,c[a(485)],c[a(496)],e*sprintWidth,t*rowHeight)||(c.width=e,c[a(424)]=t,saveAndRender())):checkOverlap(c,c[a(485)],c[a(496)],e*sprintWidth,c[a(424)]*rowHeight)||(c.width=e,saveAndRender())},document.onmouseup=()=>document[r(471)]=null,e[r(513)]()}document.getElementById(_0x3acec8(472))[_0x3acec8(425)]=highlightRow,document[_0x3acec8(446)](_0x3acec8(472))[_0x3acec8(479)]("input",e=>{var t=_0x3acec8;highlightRow=parseInt(e[t(527)][t(425)])||1,localStorage[t(524)](t(426),highlightRow),render()}),document[_0x3acec8(417)](_0x3acec8(452))[_0x3acec8(479)]("dragstart",e=>{let a=_0x3acec8,c=(e[a(502)][a(482)]("type",a(443)),e[a(502)].setDragImage(new Image,0,0),document[a(515)](a(508)));c[a(438)]="epic",c[a(467)][a(457)]="absolute",c[a(467)][a(436)]=sprintWidth+"px",c[a(467)][a(519)]=rowHeight+"px",c[a(467)][a(493)]=colors[projectData.length%colors[a(510)]],c[a(467)][a(488)]=a(492),c[a(467)][a(478)]=a(486),document[a(489)].appendChild(c),document[a(479)](a(498),e=>{var t=a;c.style[t(485)]=e[t(469)]-sprintWidth/2+"px",c[t(467)][t(496)]=e[t(525)]-rowHeight/2+"px"}),document[a(479)](a(507),()=>{var e=a;document[e(489)][e(464)](c)},{once:!0})}),timeline[_0x3acec8(479)](_0x3acec8(498),e=>e[_0x3acec8(456)]()),timeline[_0x3acec8(479)](_0x3acec8(507),e=>{var t=_0x3acec8;if(e[t(502)][t(512)](t(470))===t(443)){let c=snapToGrid(e.clientX-timeline[t(509)]()[t(485)]),r=snapToRow(e[t(525)]-timeline.getBoundingClientRect()[t(496)]);var a=colors[projectData.length%colors[t(510)]],i=Math[t(468)]((e[t(525)]-timeline.getBoundingClientRect().top)/rowHeight),e=Math.floor((e[t(469)]-timeline[t(509)]().left)/sprintWidth);if(r=i*rowHeight,checkOverlap(null,c=e*sprintWidth,r,sprintWidth,rowHeight)){var n=10;let a=!1;for(let t=-n;t<=n;t+=n){for(let e=-n;e<=n;e+=n)if(!checkOverlap(null,c+t,r+e,sprintWidth,rowHeight)){c+=t,r+=e,a=!0;break}if(a)break}if(!a)return void alert(t(517))}projectData.push({id:Date[t(500)](),name:t(523),left:c,top:r,width:1,resourceCount:1,color:a}),saveAndRender()}});let isLockAreaEnabled=JSON[_0x3acec8(497)](localStorage[_0x3acec8(475)](_0x3acec8(477)))||!1;function toggleLockArea(){var e=_0x3acec8;isLockAreaEnabled=!isLockAreaEnabled,localStorage[e(524)](e(477),JSON[e(442)](isLockAreaEnabled)),updateLockAreaToggle()}function _0x45a8(e,t){let a=_0x5974();return(_0x45a8=function(e,t){return e-=417,a[e]})(e,t)}function updateLockAreaToggle(){var e=_0x3acec8,t=document[e(446)](e(504)),a=t.querySelector("i");isLockAreaEnabled?(t[e(474)].add(e(483)),a[e(474)][e(463)]("fa-lock-open"),a[e(474)][e(422)](e(428)),t.innerHTML='<i class="fas fa-lock"></i> Effort'):(t[e(474)][e(463)]("locked"),a[e(474)][e(463)](e(428)),a.classList[e(422)](e(505)),t[e(466)]=e(460))}function startVerticalResizing(e,c){let r=_0x3acec8,i=e[r(525)],n=c.resourceCount*rowHeight,o=c[r(436)]*sprintWidth;document[r(471)]=e=>{var t,a=r,e=snapToRow(Math[a(434)](rowHeight,n+(e[a(525)]-i))),e=Math.round(e/rowHeight);isLockAreaEnabled?(t=n/rowHeight*(o/sprintWidth),t=Math[a(429)](t/e),checkOverlap(c,c[a(485)],c[a(496)],t*sprintWidth,e*rowHeight)||(c[a(436)]=t,c[a(424)]=e,saveAndRender())):checkOverlap(c,c[a(485)],c[a(496)],c[a(436)]*sprintWidth,e*rowHeight)||(c[a(424)]=e,saveAndRender())},document[r(520)]=()=>document[r(471)]=null,e.stopPropagation()}function checkOverlap(t,a,c,r=t?.width*sprintWidth,i=t?.[_0x3acec8(424)]*rowHeight){let n=_0x3acec8;return projectData[n(440)](e=>e.id!==t?.id&&c<e[n(496)]+e[n(424)]*rowHeight&&c+i>e.top&&a<e[n(485)]+e.width*sprintWidth&&a+r>e[n(485)])}function drawSprintGrid(){var t,a=_0x3acec8,c=document[a(417)](".timeline-grid"),r=(c.innerHTML="",26*sprintWidth),i=50*rowHeight;for(let e=0;e<r;e+=sprintWidth)0<e&&e/sprintWidth%6==0&&((t=document[a(515)](a(508)))[a(438)]=a(451),t.style[a(485)]=e+"px",t.style[a(519)]=i+"px",c[a(521)](t))}updateLockAreaToggle();let savedTitle=localStorage.getItem(_0x3acec8(453)),pageTitleElement=document[_0x3acec8(446)]("page-title");function downloadData(){var e=_0x3acec8,t={projectData:projectData,pageTitle:localStorage[e(475)](e(453)),isLockAreaEnabled:JSON.parse(localStorage[e(475)](e(477)))},t=e(420)+encodeURIComponent(JSON[e(442)](t)),a=document[e(515)]("a");a[e(491)](e(462),t),a[e(491)](e(419),"projectData.gntt"),document[e(489)][e(521)](a),a[e(421)](),a.remove()}function uploadData(e){let c=_0x3acec8,t=e[c(527)][c(423)][0];t&&((e=new FileReader)[c(473)]=function(e){var t=c,e=JSON[t(497)](e[t(527)][t(431)]),e=(projectData=e[t(514)]||[],localStorage.setItem(t(453),e[t(453)]||"My Project"),localStorage[t(524)](t(477),JSON[t(442)](e[t(477)]||!1)),saveAndRender(),document[t(446)](t(432))),a=localStorage[t(475)](t(453));a&&a!==t(450)?(e[t(494)]=a,e.style[t(487)]=""):(e[t(494)]="My Project",e[t(467)][t(487)]="#B0B0B0"),isLockAreaEnabled=JSON[t(497)](localStorage[t(475)](t(477)))||!1,updateLockAreaToggle()},e.readAsText(t))}function arrangeEpics(){let a=_0x3acec8,r=parseInt(document[a(446)]("highlightRowInput")[a(425)])||1,i=Array(r)[a(516)](0)[a(435)](()=>Array(26)[a(516)](!1));projectData.sort((e,t)=>t[a(424)]*t[a(436)]-e[a(424)]*e[a(436)]),projectData[a(439)](a=>{let c=!1;for(let t=0;t<26&&!c;t++)for(let e=0;e<r&&!c;e++)canPlaceEpic(a,e,t,i)&&(placeEpic(a,e,t,i),c=!0);c||alert("Cannot arrange all epics within the defined resource limit.")}),saveAndRender()}function canPlaceEpic(a,e,c,r){var i=_0x3acec8;for(let t=e;t<e+a.resourceCount;t++)for(let e=c;e<c+a[i(436)];e++)if(t>=r.length||e>=r[0][i(510)]||r[t][e])return!1;return!0}function placeEpic(a,e,c,r){var i=_0x3acec8;a.left=c*sprintWidth,a[i(496)]=e*rowHeight;for(let t=e;t<e+a[i(424)];t++)for(let e=c;e<c+a[i(436)];e++)r[t][e]=!0}function compactEpicsVertically(){let e=_0x3acec8,r=parseInt(document[e(446)]("highlightRowInput").value)||1,i=Array(r)[e(516)](0)[e(435)](()=>Array(26).fill(!1));projectData[e(439)](a=>{let c=!1;for(let t=0;t<r&&!c;t++)for(let e=0;e<26&&!c;e++)canPlaceEpic(a,t,e,i)&&(placeEpic(a,t,e,i),c=!0)})}savedTitle&&savedTitle!==_0x3acec8(450)?(pageTitleElement[_0x3acec8(494)]=savedTitle,pageTitleElement[_0x3acec8(467)].color=""):(pageTitleElement[_0x3acec8(494)]=_0x3acec8(450),pageTitleElement[_0x3acec8(467)][_0x3acec8(487)]=_0x3acec8(447)),pageTitleElement[_0x3acec8(479)](_0x3acec8(455),e=>{var t=_0x3acec8;e[t(480)]===t(465)&&e[t(456)]()}),pageTitleElement[_0x3acec8(479)](_0x3acec8(495),e=>{var t=_0x3acec8,e=e[t(527)][t(494)][t(506)]();e&&e!==t(450)?(localStorage[t(524)](t(453),e),pageTitleElement.style[t(487)]=""):(pageTitleElement[t(494)]=t(450),pageTitleElement.style[t(487)]=t(447),localStorage.setItem(t(453),t(450)))}),document.getElementById(_0x3acec8(484)).addEventListener("click",arrangeEpics),saveAndRender();